services:
  openclaw-pentest:
    build: .
    container_name: openclaw-kali-sandbox
    command: sh -c "openclaw gateway --port 18789 --allow-unconfigured & socat TCP-LISTEN:18790,fork,bind=0.0.0.0 TCP:127.0.0.1:18789"
    ports:
      - "18789:18790"
    volumes:
      - ./workspace:/workspace
      - ./custom_skills:/root/.openclaw/skills
      - ~/.config/openclaw_kali:/root/.openclaw/config
    deploy:
      resources:
        limits:
          cpus: '2.0'     
          memory: 4G      
    networks:
      - pentest-net
    restart: unless-stopped

networks:
  pentest-net:
    driver: bridge